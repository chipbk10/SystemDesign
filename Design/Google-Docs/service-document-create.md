# Document Service

## Create
**1. Request:**
  - client sends a POST request to the API Gateway with document metadata (e.g., title) and optional initial content (text, images, videos)
    
**2. Process:**
  - **Authentication**: API Gateway verifies the JWT token with the Identity Service
  - **Authorization**: the Application Server checks the access right by looking up the role based on the user_id in Collaborator table
  - **Metadata Storage**: the Application Server creates a new record in the NoSQL database (AWS DynamoDB, or Google Cloud Firestore)
    - `document_id`: UUID (auto-generated)
    - `title`, `owner_id`, `created_at`, `updated_at`
    - `collaborators` (initially just the owner with edit role, or a list of collaborators)
    - `content` (empty or initial text with embedded media)
  - **Media Upload**:
    - client uploads images/videos directly to the storage service (e.g., AWS S3, or Google Cloud Storage) using pre-signed URLs generated by the Application Server for security
      
**3. Response:**
  - returns the `document_id` to the client
    
**4. Notify:**
  - if collaborators are added during creation, the Application Server triggers the Messaging Service (e.g., AWS SNS, or Google Cloud Pub/Sub) to notify them
  - **@Todo**: asynchronously how?

